name: CD pull from staging to main
on:
  pull_request:
    branches: master

jobs:
  python-lint:
    runs-on: ubuntu-latest
    name: CD workflow
    steps:

    - name: Merge stage -> master
      uses: devmasx/merge-branch@master
      with:
        type: now
        from_branch: staging
        target_branch: master
        github_token: ${{ github.token }}
        
    - name: Package Application
      uses: JackMcKew/pyinstaller-action-windows@main
      with:
        path: src

    - uses: actions/upload-artifact@v2
      with:
        name: name-of-artifact
        path: src/dist/windows